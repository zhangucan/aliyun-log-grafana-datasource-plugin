{"version":3,"sources":["../src/sls.js"],"names":["SLS","config","backendSrv","url","hexcase","b64pad","chrsz","mt","uri","hd","bd","fn","timeout","toUpperCase","api_version","Date","toGMTString","sortStr","getSortParamStr","signature","signFn","console","log","accessId","vurl","options","method","headers","datasourceRequest","ProjectName","logstore","opt","requestData","str","signStr","accessKey","out","p","i","length","c","charCodeAt","key","s","arr","stringToUtf8ByteArray","res","forEach","f","String","fromCharCode","b64_hmac_sha12","k","d","_p","_z","_f","t","b","_k","_s","x","y","l","m","_r","n","_c","w","a","e","o","q","r","j","_b","_h","h","concat","_n","charAt","_x","obj","flag","APIVersion","push","encodeURIComponent","sort","join","hostname","replace","v","endpoint","host"],"mappings":"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","file":"sls.js","sourcesContent":["export class SLS{\n    constructor(config,backendSrv,url)\n    {\n        this.config = config;\n        this.backendSrv = backendSrv;\n        this.url = url;\n        this.hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase    */\n        this.b64pad = \"\"; /* base-64 pad character. \"=\" for strict RFC compliance  */\n        this.chrsz  = 8; /* bits per input character. 8 - ASCII; 16 - Unicode   */\n    }\n    requestData (mt, uri, hd, bd, fn, timeout) {\n        var config = this.config;\n\n        mt = mt.toUpperCase();\n\n        bd = bd || {};\n        hd['x-log-apiversion'] = config.api_version || '0.6.0';\n        hd['x-log-bodyrawsize'] = '0';\n        hd['x-log-signaturemethod'] = 'hmac-sha1';\n        hd['x-sls-date'] = new Date().toGMTString();\n\n\n        var sortStr = \"GET\\n\\n\\n\"+hd['x-sls-date']+\"\\nx-log-apiversion:\"+hd[\"x-log-apiversion\"]+\"\\nx-log-bodyrawsize:0\\nx-log-signaturemethod:hmac-sha1\\n\";\n        sortStr += uri+\"?\"+this.getSortParamStr(bd);\n\n        var signature = this.signFn(  sortStr);\n        console.log(sortStr);\n        console.log(signature);\n        hd['Authorization'] = 'LOG ' + config.accessId + \":\"+signature;\n\n        var url = uri + '?' + this.getSortParamStr(bd, true) ;\n\n        var vurl = this.url + url;\n        var options = {  url : vurl,\n                method:\"GET\",\n                headers: hd\n                };\n        console.log(\"options\",options);\n        return this.backendSrv.datasourceRequest(options\n                                );\n    }\n    GetData(ProjectName, logstore,opt, fn) {\n        opt[\"type\"] = \"log\";\n        return this.requestData('GET', '/logstores/'+logstore+\"/index\", {}, opt, fn);\n    }\n    signFn(str)\n    {\n        return this.signStr(this.config.accessKey,str);\n        //return this.b64_hmac_sha12(this.config.accessKey,str);\n    }\n\n\n\n    stringToUtf8ByteArray (str) {\n        // TODO(user): Use native implementations if/when available\n        var out = [], p = 0;\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c < 128) {\n                out[p++] = c;\n            } else if (c < 2048) {\n                out[p++] = (c >> 6) | 192;\n                out[p++] = (c & 63) | 128;\n            } else if (\n                ((c & 0xFC00) == 0xD800) && (i + 1) < str.length &&\n                ((str.charCodeAt(i + 1) & 0xFC00) == 0xDC00)) {\n                // Surrogate Pair\n                c = 0x10000 + ((c & 0x03FF) << 10) + (str.charCodeAt(++i) & 0x03FF);\n                out[p++] = (c >> 18) | 240;\n                out[p++] = ((c >> 12) & 63) | 128;\n                out[p++] = ((c >> 6) & 63) | 128;\n                out[p++] = (c & 63) | 128;\n            } else {\n                out[p++] = (c >> 12) | 224;\n                out[p++] = ((c >> 6) & 63) | 128;\n                out[p++] = (c & 63) | 128;\n            }\n        }\n        return out;\n    };\n\n    signStr(key,s)\n    {\n        var arr = this.stringToUtf8ByteArray(s);\n        var res = \"\";\n        arr.forEach(function(f){\n            res += String.fromCharCode(f);\n        });\n        return this.b64_hmac_sha12(key,res);\n    }\n    b64_hmac_sha12(k,d,_p,_z){\n        // heavily optimized and compressed version of http://pajhome.org.uk/crypt/md5/sha1.js\n        // _p = b64pad, _z = character size; not used here but I left them available just in case\n        if(!_p){_p='=';}if(!_z){_z=8;}function _f(t,b,c,d){if(t<20){return(b&c)|((~b)&d);}if(t<40){return b^c^d;}if(t<60){return(b&c)|(b&d)|(c&d);}return b^c^d;}function _k(t){return(t<20)?1518500249:(t<40)?1859775393:(t<60)?-1894007588:-899497514;}function _s(x,y){var l=(x&0xFFFF)+(y&0xFFFF),m=(x>>16)+(y>>16)+(l>>16);return(m<<16)|(l&0xFFFF);}function _r(n,c){return(n<<c)|(n>>>(32-c));}function _c(x,l){x[l>>5]|=0x80<<(24-l%32);x[((l+64>>9)<<4)+15]=l;var w=[80],a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0;i<x.length;i+=16){var o=a,p=b,q=c,r=d,s=e;for(var j=0;j<80;j++){if(j<16){w[j]=x[i+j];}else{w[j]=_r(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);}var t=_s(_s(_r(a,5),_f(j,b,c,d)),_s(_s(e,w[j]),_k(j)));e=d;d=c;c=_r(b,30);b=a;a=t;}a=_s(a,o);b=_s(b,p);c=_s(c,q);d=_s(d,r);e=_s(e,s);}return[a,b,c,d,e];}function _b(s){var b=[],m=(1<<_z)-1;for(var i=0;i<s.length*_z;i+=_z){b[i>>5]|=(s.charCodeAt(i/8)&m)<<(32-_z-i%32);}return b;}function _h(k,d){var b=_b(k);if(b.length>16){b=_c(b,k.length*_z);}var p=[16],o=[16];for(var i=0;i<16;i++){p[i]=b[i]^0x36363636;o[i]=b[i]^0x5C5C5C5C;}var h=_c(p.concat(_b(d)),512+d.length*_z);return _c(o.concat(h),512+160);}function _n(b){var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",s='';for(var i=0;i<b.length*4;i+=3){var r=(((b[i>>2]>>8*(3-i%4))&0xFF)<<16)|(((b[i+1>>2]>>8*(3-(i+1)%4))&0xFF)<<8)|((b[i+2>>2]>>8*(3-(i+2)%4))&0xFF);for(var j=0;j<4;j++){if(i*8+j*6>b.length*32){s+=_p;}else{s+=t.charAt((r>>6*(3-j))&0x3F);}}}return s;}function _x(k,d){return _n(_h(k,d));}return _x(k,d);\n    }\n    getSortParamStr (obj, flag) {\n        var t = [];\n        if (flag) {\n            for (var k in obj) {\n                if (k=='protobuf'|| obj.APIVersion >= '0.3.0' && k == 'Project')continue;\n                t.push(k + '=' + encodeURIComponent(obj[k]));\n            }\n        }\n        else {\n            for (var k in obj) {\n                if (k=='protobuf' || obj.APIVersion >= '0.3.0' && k == 'Project')continue;\n                t.push(k + '=' + obj[k]);\n            }\n        }\n        t.sort();\n        return t.join('&');\n    }\n    getRealEndPoint (url, obj){\n\n        //test\n        //return {endpoint:  'http://service.sls-stg.aliyun-inc.com:179/', host: '44.sls-stg.aliyun-inc.com:179'};\n        var hostname = url.replace(\"http://\",\"\");\n        var v = url.replace(\"http://\",\"\");\n        return {endpoint:\"http://\"+obj[\"Project\"]+\".\"+v,host: hostname};\n    };\n\n}\n"]}